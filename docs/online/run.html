
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Launching Online Training: The run.py Script &#8212; MineStudio</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=d6734ac8" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=00f267c6"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/thebelab-helper.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'online/run';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://craftjarvis.github.io/MineStudio/_static/version.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'latest';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <script defer="defer" src="../_static/custom-icons.js?v=26a3f3bc"></script>
    <link rel="icon" href="../_static/logo-no-text-light.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Shared Utilities for Online Training: The utils Module" href="utils.html" />
    <link rel="prev" title="Rollout" href="rollout.html" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />   
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo-no-text-light.svg" class="logo__image only-light" alt=""/>
    <img src="../_static/logo-no-text-light.svg" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">MineStudio</p>
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../overview/index.html">
    Overview
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../overview/getting-started.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../simulator/index.html">
    Simulator
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../data/index.html">
    Data
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../models/index.html">
    Models
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../offline/index.html">
    Offline
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="index.html">
    Online
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../inference/index.html">
    Inference
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../benchmark/index.html">
    Benchmark
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../api/index.html">
    API
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/CraftJarvis/MineStudio" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/minestudio" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-custom fa-pypi fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://arxiv.org/pdf/2310.08235" title="ArXiv" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-custom fa-arxiv fa-lg" aria-hidden="true"></i>
            <span class="sr-only">ArXiv</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
          
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../overview/index.html">
    Overview
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../overview/getting-started.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../simulator/index.html">
    Simulator
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../data/index.html">
    Data
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../models/index.html">
    Models
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../offline/index.html">
    Offline
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="index.html">
    Online
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../inference/index.html">
    Inference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../benchmark/index.html">
    Benchmark
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/CraftJarvis/MineStudio" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/minestudio" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-custom fa-pypi fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://arxiv.org/pdf/2310.08235" title="ArXiv" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-custom fa-arxiv fa-lg" aria-hidden="true"></i>
            <span class="sr-only">ArXiv</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../overview/installation.html">Installation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">MineStudio Libraries</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../simulator/index.html">Simulator</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../simulator/general-information.html">General Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simulator/design-principles.html">Design Principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simulator/play.html">Graphical User Interfaces</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../data/index.html">Data</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../data/dataset-raw.html">Raw Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/dataset-event.html">Event Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/visualization.html">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/convertion.html">Data Conversion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/callbacks.html">Data Processing Callbacks</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../models/index.html">Models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../models/baseline-vpt.html">Built-in Models: VPT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/baseline-steve1.html">Built-in Models: STEVE-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/baseline-groot.html">Built-in Models: GROOT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/baseline-rocket1.html">Built-in Models: ROCKET-1</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../offline/index.html">Offline Training</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../offline/tutorial-vpt.html">Tutorial: Fine-tuning VPT to a Hunter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../offline/tutorial-rocket.html">Tutorial: Pre-Training ROCKET-1 from Scratch</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Online Training</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="general-information.html">Online Training Module: General Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">Configuring Online Training Sessions</a></li>
<li class="toctree-l2"><a class="reference internal" href="trainer.html">Trainer</a></li>
<li class="toctree-l2"><a class="reference internal" href="rollout.html">Rollout</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Launching Online Training: The <code class="docutils literal notranslate"><span class="pre">run.py</span></code> Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Shared Utilities for Online Training: The <code class="docutils literal notranslate"><span class="pre">utils</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="customization.html">Customize</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../inference/index.html">Inference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../inference/baseline-vpt.html">Tutorial: Inference with VPT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference/baseline-groot.html">Tutorial: Inference with GROOT</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../benchmark/index.html">Benchmark</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../benchmark/quick-benchmark.html">Quick benchmark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../benchmark/automatic-evaluation.html">Automatic Evaluation Pipeline</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/index.html">MineStudio API Documentation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/simulator/index.html">Simulator</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/data/index.html">Data</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/models/index.html">Models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/offline/index.html">Offline</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/online/index.html">Online</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/inference/index.html">Inference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../overview/index.html" class="nav-link">Overview</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Online Training</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Launching Online Training: The <code class="docutils literal notranslate"><span class="pre">run.py</span></code> Script</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                   <!-- filepath: /Users/muzhancun/workspace/MineStudio/docs/source/online/run.md -->
<section id="launching-online-training-the-run-py-script">
<h1>Launching Online Training: The <code class="docutils literal notranslate"><span class="pre">run.py</span></code> Script<a class="headerlink" href="#launching-online-training-the-run-py-script" title="Link to this heading">#</a></h1>
<p>The primary entry point for initiating an online training session within MineStudio is the <code class="docutils literal notranslate"><span class="pre">run.py</span></code> script, typically located at <code class="docutils literal notranslate"><span class="pre">minestudio/online/run/run.py</span></code>. This script serves as the orchestrator, setting up the environment and launching the distributed components necessary for the agent to learn and interact with the Minecraft world.</p>
<section id="core-responsibilities">
<h2>Core Responsibilities<a class="headerlink" href="#core-responsibilities" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">run.py</span></code> script is meticulously designed with several key responsibilities:</p>
<ol class="arabic simple">
<li><p><strong>Configuration Management</strong>: At its heart, the script is responsible for loading and interpreting the training configuration. This configuration dictates every aspect of the training session, from the specifics of the Minecraft environment to the neural network architecture of the policy and the various hyperparameters that guide the learning process. MineStudio leverages Hydra for sophisticated and flexible configuration management, allowing users to easily switch between different predefined setups (e.g., <code class="docutils literal notranslate"><span class="pre">gate_kl</span></code>, <code class="docutils literal notranslate"><span class="pre">another_setup</span></code>) or customize their own.</p></li>
<li><p><strong>Service Orchestration</strong>: Once the configuration is loaded, <code class="docutils literal notranslate"><span class="pre">run.py</span></code> takes on the role of a conductor, initializing and starting the essential Ray actors that form the backbone of the online training pipeline. The two most critical actors are the <code class="docutils literal notranslate"><span class="pre">RolloutManager</span></code>, which oversees the collection of experience data from the environment, and the <code class="docutils literal notranslate"><span class="pre">Trainer</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">PPOTrainer</span></code>), which is responsible for optimizing the agent’s policy based on the collected data.</p></li>
<li><p><strong>Training Lifecycle Initiation</strong>: While the intricate, step-by-step training loop resides within the <code class="docutils literal notranslate"><span class="pre">Trainer</span></code> actor, <code class="docutils literal notranslate"><span class="pre">run.py</span></code> is the catalyst that sets this entire process in motion. It ensures all components are correctly initialized and interconnected before signaling the <code class="docutils literal notranslate"><span class="pre">Trainer</span></code> to begin its work.</p></li>
</ol>
</section>
<section id="execution-flow-a-step-by-step-breakdown">
<h2>Execution Flow: A Step-by-Step Breakdown<a class="headerlink" href="#execution-flow-a-step-by-step-breakdown" title="Link to this heading">#</a></h2>
<p>The execution of <code class="docutils literal notranslate"><span class="pre">minestudio/online/run/run.py</span></code> follows a logical sequence to ensure a smooth start to the training process:</p>
<section id="configuration-loading-and-parsing">
<h3>1. Configuration Loading and Parsing<a class="headerlink" href="#configuration-loading-and-parsing" title="Link to this heading">#</a></h3>
<p>The journey begins with loading the appropriate configuration:</p>
<ul class="simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">config_name</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;gate_kl&quot;</span></code>) is typically provided as an argument or set as a default. This name directly corresponds to a Python configuration file nestled within the <code class="docutils literal notranslate"><span class="pre">minestudio/online/run/config/</span></code> directory.</p></li>
<li><p>The script dynamically imports the Python module associated with this <code class="docutils literal notranslate"><span class="pre">config_name</span></code> (for instance, <code class="docutils literal notranslate"><span class="pre">minestudio.online.run.config.gate_kl</span></code>).</p></li>
<li><p>From this imported module, several key components are extracted:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">env_generator</span></code>: A callable (usually a function or a class) that, when invoked, returns a new instance of the Minecraft environment (<code class="docutils literal notranslate"><span class="pre">MinecraftSim</span></code>). This allows for fresh environments to be created as needed by the rollout workers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">policy_generator</span></code>: Similar to the <code class="docutils literal notranslate"><span class="pre">env_generator</span></code>, this is a callable that produces an instance of the agent’s policy model (e.g., <code class="docutils literal notranslate"><span class="pre">MinePolicy</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">online_dict</span></code>: A Python dictionary containing all the specific settings for the online training session. This dictionary is then seamlessly converted into an <code class="docutils literal notranslate"><span class="pre">OmegaConf</span></code> object (commonly named <code class="docutils literal notranslate"><span class="pre">online_cfg</span></code>), which provides a structured and powerful way to access configuration values.</p></li>
</ul>
</li>
<li><p>For logging and reproducibility, the entire content of the chosen configuration file is often read into a string variable (e.g., <code class="docutils literal notranslate"><span class="pre">whole_config</span></code>). This allows the <code class="docutils literal notranslate"><span class="pre">Trainer</span></code> to save the exact configuration used for a particular training run.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The use of Hydra and OmegaConf provides a highly flexible system. Users can override configuration parameters directly from the command line, making experimentation and fine-tuning more accessible without needing to modify the core configuration files for every small change.</p>
</div>
</section>
<section id="ray-initialization-prerequisite">
<h3>2. Ray Initialization (Prerequisite)<a class="headerlink" href="#ray-initialization-prerequisite" title="Link to this heading">#</a></h3>
<p>It’s crucial to understand that before <code class="docutils literal notranslate"><span class="pre">run.py</span></code> can launch any Ray actors, the Ray environment itself must be initialized. This typically involves:</p>
<ul class="simple">
<li><p>A call to <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code>. This might be done with specific arguments, such as a <code class="docutils literal notranslate"><span class="pre">namespace</span></code> (e.g., “online”), to logically group actors and services within a Ray cluster.</p></li>
<li><p>This initialization step connects the script to an existing Ray cluster or starts a new one if running locally. In many production or research setups, helper scripts (like <code class="docutils literal notranslate"><span class="pre">start_headnode.sh</span></code>) or cluster management tools handle the setup of the Ray cluster. The <code class="docutils literal notranslate"><span class="pre">run.py</span></code> script then simply connects to this pre-existing infrastructure.</p></li>
</ul>
</section>
<section id="launching-the-rollout-manager">
<h3>3. Launching the Rollout Manager<a class="headerlink" href="#launching-the-rollout-manager" title="Link to this heading">#</a></h3>
<p>With the configuration in place and Ray ready, the script proceeds to start the experience collection machinery:</p>
<ul class="simple">
<li><p>The function <code class="docutils literal notranslate"><span class="pre">start_rolloutmanager(policy_generator,</span> <span class="pre">env_generator,</span> <span class="pre">online_cfg)</span></code> is invoked.</p></li>
<li><p>This function, typically residing in <code class="docutils literal notranslate"><span class="pre">minestudio.online.rollout.start_manager</span></code> (or a similar utility module), is tasked with:</p>
<ul>
<li><p>Creating and launching the <code class="docutils literal notranslate"><span class="pre">RolloutManager</span></code> as a Ray actor.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">RolloutManager</span></code>, upon its own initialization, will use the provided <code class="docutils literal notranslate"><span class="pre">policy_generator</span></code>, <code class="docutils literal notranslate"><span class="pre">env_generator</span></code>, and the relevant sections of <code class="docutils literal notranslate"><span class="pre">online_cfg</span></code> (specifically <code class="docutils literal notranslate"><span class="pre">online_cfg.rollout_config</span></code> and <code class="docutils literal notranslate"><span class="pre">online_cfg.env_config</span></code>) to configure and spawn its distributed fleet of <code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code> actors. These wrappers, in turn, manage individual <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code> instances and <code class="docutils literal notranslate"><span class="pre">EnvWorker</span></code> processes.</p></li>
</ul>
</li>
</ul>
</section>
<section id="launching-the-trainer">
<h3>4. Launching the Trainer<a class="headerlink" href="#launching-the-trainer" title="Link to this heading">#</a></h3>
<p>Once the <code class="docutils literal notranslate"><span class="pre">RolloutManager</span></code> is operational and ready to supply data, the <code class="docutils literal notranslate"><span class="pre">Trainer</span></code> is brought online:</p>
<ul class="simple">
<li><p>The function <code class="docutils literal notranslate"><span class="pre">start_trainer(policy_generator,</span> <span class="pre">env_generator,</span> <span class="pre">online_cfg,</span> <span class="pre">whole_config)</span></code> is called.</p></li>
<li><p>This function, often found in <code class="docutils literal notranslate"><span class="pre">minestudio.online.trainer.start_trainer</span></code>, handles the setup of the learning component:</p>
<ul>
<li><p>It configures the Ray Train environment. This includes specifying details like the number of training workers (if distributed training is used), GPU allocation per worker, and other scaling parameters, usually derived from <code class="docutils literal notranslate"><span class="pre">online_cfg.train_config.scaling_config</span></code>.</p></li>
<li><p>It instantiates the chosen trainer class. The specific class (e.g., <code class="docutils literal notranslate"><span class="pre">PPOTrainer</span></code>) is determined by <code class="docutils literal notranslate"><span class="pre">online_cfg.trainer_name</span></code>.</p></li>
<li><p>The trainer is initialized with the <code class="docutils literal notranslate"><span class="pre">policy_generator</span></code>, <code class="docutils literal notranslate"><span class="pre">env_generator</span></code>, a handle to the now-running <code class="docutils literal notranslate"><span class="pre">RolloutManager</span></code> actor (which it can obtain by calling a utility like <code class="docutils literal notranslate"><span class="pre">get_rollout_manager</span></code>), and the detailed training configurations from <code class="docutils literal notranslate"><span class="pre">online_cfg.train_config</span></code>. The <code class="docutils literal notranslate"><span class="pre">whole_config</span></code> string is also passed along for logging.</p></li>
<li><p>Crucially, the trainer’s main training method (commonly <code class="docutils literal notranslate"><span class="pre">train()</span></code> or <code class="docutils literal notranslate"><span class="pre">fit()</span></code>) is then invoked. This call is typically blocking and marks the beginning of the actual iterative process of sampling data and updating the policy.</p></li>
</ul>
</li>
</ul>
</section>
<section id="sustained-operation">
<h3>5. Sustained Operation<a class="headerlink" href="#sustained-operation" title="Link to this heading">#</a></h3>
<p>After successfully launching the <code class="docutils literal notranslate"><span class="pre">RolloutManager</span></code> and the <code class="docutils literal notranslate"><span class="pre">Trainer</span></code> actors, the <code class="docutils literal notranslate"><span class="pre">run.py</span></code> script itself might appear to do very little. Often, it will enter a long <code class="docutils literal notranslate"><span class="pre">time.sleep()</span></code> loop or a similar mechanism to keep the main process alive.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This behavior is characteristic of actor-based distributed systems. The primary work of data collection and model training is performed asynchronously by the Ray actors running in the background, potentially across multiple processes or even multiple machines in a cluster. The <code class="docutils literal notranslate"><span class="pre">run.py</span></code> script’s main role after initialization is to ensure these background services remain operational.</p>
</div>
<p>In summary, <code class="docutils literal notranslate"><span class="pre">run.py</span></code> is the conductor of the online training orchestra. It doesn’t play an instrument itself during the main performance but is indispensable for selecting the music (configuration), assembling the musicians (Ray actors), and cuing them to start. The complex harmonies of learning and interaction then unfold within the dedicated <code class="docutils literal notranslate"><span class="pre">Trainer</span></code> and <code class="docutils literal notranslate"><span class="pre">RolloutManager</span></code> components.</p>
</section>
</section>
</section>

<div class="section ablog__blog_comments">
   
</div>

                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="rollout.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Rollout</p>
      </div>
    </a>
    <a class="right-next"
       href="utils.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Shared Utilities for Online Training: The <code class="docutils literal notranslate"><span class="pre">utils</span></code> Module</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#core-responsibilities">Core Responsibilities</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#execution-flow-a-step-by-step-breakdown">Execution Flow: A Step-by-Step Breakdown</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration-loading-and-parsing">1. Configuration Loading and Parsing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ray-initialization-prerequisite">2. Ray Initialization (Prerequisite)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#launching-the-rollout-manager">3. Launching the Rollout Manager</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#launching-the-trainer">4. Launching the Trainer</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sustained-operation">5. Sustained Operation</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/online/run.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, The CraftJarvis Team.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>