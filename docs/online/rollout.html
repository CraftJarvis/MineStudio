
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Rollout &#8212; MineStudio</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=d6734ac8" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=00f267c6"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/thebelab-helper.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'online/rollout';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://craftjarvis.github.io/MineStudio/_static/version.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'latest';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <script defer="defer" src="../_static/custom-icons.js?v=26a3f3bc"></script>
    <link rel="icon" href="../_static/logo-no-text-light.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Launching Online Training: The run.py Script" href="run.html" />
    <link rel="prev" title="Trainer" href="trainer.html" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />   
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo-no-text-light.svg" class="logo__image only-light" alt=""/>
    <img src="../_static/logo-no-text-light.svg" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">MineStudio</p>
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../overview/index.html">
    Overview
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../overview/getting-started.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../simulator/index.html">
    Simulator
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../data/index.html">
    Data
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../models/index.html">
    Models
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../offline/index.html">
    Offline
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="index.html">
    Online
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../inference/index.html">
    Inference
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../benchmark/index.html">
    Benchmark
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../api/index.html">
    API
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/CraftJarvis/MineStudio" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/minestudio" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-custom fa-pypi fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://arxiv.org/pdf/2310.08235" title="ArXiv" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-custom fa-arxiv fa-lg" aria-hidden="true"></i>
            <span class="sr-only">ArXiv</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
          
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../overview/index.html">
    Overview
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../overview/getting-started.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../simulator/index.html">
    Simulator
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../data/index.html">
    Data
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../models/index.html">
    Models
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../offline/index.html">
    Offline
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="index.html">
    Online
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../inference/index.html">
    Inference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../benchmark/index.html">
    Benchmark
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/CraftJarvis/MineStudio" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/minestudio" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-custom fa-pypi fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://arxiv.org/pdf/2310.08235" title="ArXiv" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-custom fa-arxiv fa-lg" aria-hidden="true"></i>
            <span class="sr-only">ArXiv</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../overview/installation.html">Installation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">MineStudio Libraries</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../simulator/index.html">Simulator</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../simulator/general-information.html">General Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simulator/design-principles.html">Design Principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simulator/play.html">Graphical User Interfaces</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../data/index.html">Data</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../data/dataset-raw.html">Raw Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/dataset-event.html">Event Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/visualization.html">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/convertion.html">Data Conversion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/callbacks.html">Data Processing Callbacks</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../models/index.html">Models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../models/baseline-vpt.html">Built-in Models: VPT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/baseline-steve1.html">Built-in Models: STEVE-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/baseline-groot.html">Built-in Models: GROOT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/baseline-rocket1.html">Built-in Models: ROCKET-1</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../offline/index.html">Offline Training</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../offline/tutorial-vpt.html">Tutorial: Fine-tuning VPT to a Hunter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../offline/tutorial-rocket.html">Tutorial: Pre-Training ROCKET-1 from Scratch</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Online Training</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="general-information.html">Online Training Module: General Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">Configuring Online Training Sessions</a></li>
<li class="toctree-l2"><a class="reference internal" href="trainer.html">Trainer</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Rollout</a></li>
<li class="toctree-l2"><a class="reference internal" href="run.html">Launching Online Training: The <code class="docutils literal notranslate"><span class="pre">run.py</span></code> Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Shared Utilities for Online Training: The <code class="docutils literal notranslate"><span class="pre">utils</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="customization.html">Customize</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../inference/index.html">Inference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../inference/baseline-vpt.html">Tutorial: Inference with VPT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference/baseline-groot.html">Tutorial: Inference with GROOT</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../benchmark/index.html">Benchmark</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../benchmark/quick-benchmark.html">Quick benchmark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../benchmark/automatic-evaluation.html">Automatic Evaluation Pipeline</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/index.html">MineStudio API Documentation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/simulator/index.html">Simulator</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/data/index.html">Data</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/models/index.html">Models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/offline/index.html">Offline</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/online/index.html">Online</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/inference/index.html">Inference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../overview/index.html" class="nav-link">Overview</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Online Training</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Rollout</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                   <section id="rollout">
<h1>Rollout<a class="headerlink" href="#rollout" title="Link to this heading">#</a></h1>
<p>This document delves into the rollout process within the online training module, a critical phase where the agent interacts with the environment to gather experiences.</p>
<section id="design-principle">
<h2>Design Principle<a class="headerlink" href="#design-principle" title="Link to this heading">#</a></h2>
<p>The rollout module is engineered for efficient, large-scale experience collection, leveraging the power of <code class="docutils literal notranslate"><span class="pre">Ray</span></code> for distributed execution. Its design revolves around a few key components and philosophies.</p>
<p>At the most granular level, the <strong><code class="docutils literal notranslate"><span class="pre">EnvWorker</span></code></strong> (Environment Worker) is responsible for running an individual instance of the Minecraft simulation. Multiple <code class="docutils literal notranslate"><span class="pre">EnvWorker</span></code>s operate in parallel, each generating a stream of raw interactions.</p>
<p>Orchestrating these <code class="docutils literal notranslate"><span class="pre">EnvWorker</span></code>s is the <strong><code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code></strong>. This component manages a collection of environments and houses the current policy model. Its primary duties include spawning and overseeing its <code class="docutils literal notranslate"><span class="pre">EnvWorker</span></code>s, performing inference (i.e., using the policy model to decide actions based on observations from <code class="docutils literal notranslate"><span class="pre">EnvWorker</span></code>s), stepping the environments forward by relaying these actions, and collecting the resultant data (observations, actions, rewards, and done states). The <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code> also communicates with an <code class="docutils literal notranslate"><span class="pre">EpisodeStatistics</span></code> actor to report metrics. For flexibility, a <code class="docutils literal notranslate"><span class="pre">progress_handler</span></code> can be specified; this callback is invoked with step-wise data and is typically used to channel the collected experiences towards a replay buffer.</p>
<p>To manage the lifecycle and distributed nature of <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code>s, they are wrapped by <strong><code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code></strong> Ray actors. Each <code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code> is responsible for a single <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code>. It handles model updates pushed from the trainer and manages communication with the replay buffer. A key function of the wrapper is to buffer the steps collected by its <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code> and assemble them into <code class="docutils literal notranslate"><span class="pre">SampleFragment</span></code>s – coherent chunks of trajectory data.</p>
<p>Overseeing the entire distributed fleet of <code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code>s is the <strong><code class="docutils literal notranslate"><span class="pre">RolloutManager</span></code></strong>, itself a Ray actor. This central coordinator manages the creation and supervision of all <code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code>s. It plays a crucial role in <strong>Model Synchronization</strong>: when the trainer produces an updated model, it’s sent to the <code class="docutils literal notranslate"><span class="pre">RolloutManager</span></code>, which then efficiently distributes these new model weights to all its <code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code>s. These wrappers, in turn, update their local <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code> instances. The system also manages data staleness, ensuring that workers don’t continue to generate data with overly outdated policies. The <code class="docutils literal notranslate"><span class="pre">RolloutManager</span></code> also interfaces with the <code class="docutils literal notranslate"><span class="pre">ReplayBuffer</span></code> (often via a <code class="docutils literal notranslate"><span class="pre">ReplayBufferInterface</span></code>) and the <code class="docutils literal notranslate"><span class="pre">EpisodeStatistics</span></code> actor.</p>
<p>The <strong>Data Flow</strong> is designed for parallelism and efficiency: <code class="docutils literal notranslate"><span class="pre">EnvWorker</span></code>s run environment instances and send observations to their <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code>. The <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code> performs inference, sends actions back, and collects step data. This data is passed to its <code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code> via the <code class="docutils literal notranslate"><span class="pre">progress_handler</span></code>. The <code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code> buffers these steps, assembles them into <code class="docutils literal notranslate"><span class="pre">SampleFragment</span></code>s, and then typically uses a separate internal queue and sender thread to push these fragments to the <code class="docutils literal notranslate"><span class="pre">ReplayBufferInterface</span></code>, ready for the trainer.</p>
</section>
<section id="logic">
<h2>Logic<a class="headerlink" href="#logic" title="Link to this heading">#</a></h2>
<p>The rollout process unfolds through a sequence of coordinated actions, primarily orchestrated by Ray actors:</p>
<section id="initialization-setting-the-stage">
<h3>1. Initialization: Setting the Stage<a class="headerlink" href="#initialization-setting-the-stage" title="Link to this heading">#</a></h3>
<p>The process begins with the creation of the <strong><code class="docutils literal notranslate"><span class="pre">RolloutManager</span></code></strong> Ray actor. This manager immediately takes on the task of spawning multiple <strong><code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code></strong> Ray actors. Each of these wrappers, upon its own initialization, creates and configures a local <strong><code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code></strong> instance. Finally, each <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code> launches several <strong><code class="docutils literal notranslate"><span class="pre">EnvWorker</span></code></strong> processes. Each <code class="docutils literal notranslate"><span class="pre">EnvWorker</span></code> is an independent simulation of the Minecraft environment, ready to interact with an agent.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hierarchical setup (<code class="docutils literal notranslate"><span class="pre">RolloutManager</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code> (actor) -&gt; <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">EnvWorker</span></code> (process)) allows for scalable and resilient distributed data collection. Ray’s actor model handles the complexities of inter-process communication and scheduling across potentially many machines.</p>
</div>
</section>
<section id="the-experience-collection-loop-agents-in-action">
<h3>2. The Experience Collection Loop: Agents in Action<a class="headerlink" href="#the-experience-collection-loop-agents-in-action" title="Link to this heading">#</a></h3>
<p>The core of the rollout happens within each <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code>. This is a continuous loop:
The <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code> actively <strong>polls</strong> its associated <code class="docutils literal notranslate"><span class="pre">EnvWorker</span></code>s for new observations from the game. Once enough observations are gathered to form an inference batch (the size of which is configurable), the <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code> uses its current policy model to <strong>perform inference</strong>, generating actions for each environment. These actions are then dispatched back to the respective <code class="docutils literal notranslate"><span class="pre">EnvWorker</span></code>s, which apply them to their Minecraft instances and step the simulation forward.</p>
<p>The resulting data from each step – the new observation, the action taken, the reward received, and whether the episode terminated or was truncated – is then passed by the <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code> to its <code class="docutils literal notranslate"><span class="pre">progress_handler</span></code>. As mentioned, this handler is typically a method within the parent <code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code>.</p>
</section>
<section id="data-buffering-and-fragment-creation-packaging-experiences">
<h3>3. Data Buffering and Fragment Creation: Packaging Experiences<a class="headerlink" href="#data-buffering-and-fragment-creation-packaging-experiences" title="Link to this heading">#</a></h3>
<p>Inside the <code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code>, the <code class="docutils literal notranslate"><span class="pre">progress_handler</span></code> (called by the <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code>) appends the incoming step data to an internal buffer, usually specific to each <code class="docutils literal notranslate"><span class="pre">EnvWorker</span></code> it manages. When the buffer for a particular environment accumulates enough steps (typically <code class="docutils literal notranslate"><span class="pre">fragment_length</span> <span class="pre">+</span> <span class="pre">1</span></code>, where <code class="docutils literal notranslate"><span class="pre">fragment_length</span></code> is the desired size of a data chunk), a <code class="docutils literal notranslate"><span class="pre">SampleFragment</span></code> is created. This fragment encapsulates the first <code class="docutils literal notranslate"><span class="pre">fragment_length</span></code> steps, forming a coherent piece of trajectory.
This newly minted <code class="docutils literal notranslate"><span class="pre">SampleFragment</span></code> is then placed into an internal <strong>queue</strong> within the <code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Using an internal queue and a separate sender thread within the <code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code> decouples the data collection (which is often synchronous with the environment steps) from the data transmission to the replay buffer. This can improve throughput and prevent the environment simulation from stalling if the replay buffer is temporarily slow to ingest data.</p>
</div>
<p>A dedicated <strong>sender thread</strong> running within the <code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code> continuously monitors this queue. It takes <code class="docutils literal notranslate"><span class="pre">SampleFragment</span></code>s from the queue and adds them to the <code class="docutils literal notranslate"><span class="pre">ReplayBufferInterface</span></code>, making them available for the training process.</p>
</section>
<section id="model-updates-staying-current">
<h3>4. Model Updates: Staying Current<a class="headerlink" href="#model-updates-staying-current" title="Link to this heading">#</a></h3>
<p>To ensure the agent learns from the most effective behaviors, its policy model must be kept up-to-date. The <code class="docutils literal notranslate"><span class="pre">Trainer</span></code> component, after performing its optimization steps, periodically sends new model weights to the <code class="docutils literal notranslate"><span class="pre">RolloutManager</span></code>.
The <code class="docutils literal notranslate"><span class="pre">RolloutManager</span></code> then efficiently <strong>broadcasts</strong> these updated weights to all its managed <code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code> actors. Upon receiving new weights, each <code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code> instructs its local <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code> to load them into its policy model.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">max_staleness</span></code> parameter is often used to manage data quality. If a <code class="docutils literal notranslate"><span class="pre">RolloutWorkerWrapper</span></code> finds that the data it’s collecting is based on a model version that is too old compared to the latest version received, it might discard that data or reset its buffers to avoid polluting the replay buffer with experiences from a significantly outdated policy.</p>
</section>
<section id="monitoring-performance-and-progress-statistics">
<h3>5. Monitoring Performance and Progress: Statistics<a class="headerlink" href="#monitoring-performance-and-progress-statistics" title="Link to this heading">#</a></h3>
<p>Keeping track of the rollout process is vital. Two main components handle this:
The <strong><code class="docutils literal notranslate"><span class="pre">EpisodeStatistics</span></code></strong> actor, a central Ray actor, is responsible for tracking and logging episode-level metrics. As <code class="docutils literal notranslate"><span class="pre">EnvWorker</span></code>s complete episodes (via their <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code>), they report information like total rewards and episode lengths to <code class="docutils literal notranslate"><span class="pre">EpisodeStatistics</span></code>. This provides a high-level view of agent performance.</p>
<p>At a more granular level, the <strong><code class="docutils literal notranslate"><span class="pre">PipelineMonitor</span></code></strong> (often residing within each <code class="docutils literal notranslate"><span class="pre">RolloutWorker</span></code>) tracks performance metrics of the data collection pipeline itself. This can include timings for different stages, such as the time spent receiving observations from environments, the duration of the inference step, and the time taken to send actions back. This information is invaluable for identifying bottlenecks and optimizing the rollout throughput.</p>
<p>In essence, the <code class="docutils literal notranslate"><span class="pre">RolloutManager</span></code> acts as the conductor of this distributed orchestra of workers and actors. It ensures that all components are working in concert, using up-to-date policies, and that the valuable experience data generated by the agent’s interactions is efficiently collected, packaged, and stored for learning.</p>
</section>
</section>
</section>

<div class="section ablog__blog_comments">
   
</div>

                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="trainer.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Trainer</p>
      </div>
    </a>
    <a class="right-next"
       href="run.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Launching Online Training: The <code class="docutils literal notranslate"><span class="pre">run.py</span></code> Script</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#design-principle">Design Principle</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#logic">Logic</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#initialization-setting-the-stage">1. Initialization: Setting the Stage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-experience-collection-loop-agents-in-action">2. The Experience Collection Loop: Agents in Action</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-buffering-and-fragment-creation-packaging-experiences">3. Data Buffering and Fragment Creation: Packaging Experiences</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#model-updates-staying-current">4. Model Updates: Staying Current</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monitoring-performance-and-progress-statistics">5. Monitoring Performance and Progress: Statistics</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/online/rollout.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, The CraftJarvis Team.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>